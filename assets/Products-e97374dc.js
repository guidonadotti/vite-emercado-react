import{j as e,r as n,P as h,a as f,B as g,S as F,c as I,_ as T,C as _}from"./index-c52a1109.js";import{M as A,T as S,a as p,c as v,e as $,d as u,r as B,l as V,F as w}from"./FiltrosDropdown-b7caf4d5.js";import{R as b}from"./Row-886e41f2.js";import{m as M}from"./mayusculas-3fb5da86.js";import{A as O,a as P,b as E}from"./index.esm-5af871a5.js";import{B as L}from"./ButtonGroup-4a8406f6.js";import{F as x}from"./Form-ee3cd23b.js";import{C as m}from"./CardsPersonalizadas-c2aa28d3.js";import{u as R}from"./useWindowTitle-276ea800.js";function q({categoria:s=""}){return s=M(s),e.jsxs(A,{titulo:s,children:["Verás aquí todos los productos de la categoría «",s,"»"]})}function D(){const{setOrder:s}=n.useContext(h),[t,a,r]=[`dsc_${n.useId()}`,`asc_${n.useId()}`,`rel_${n.useId()}`];return e.jsx(b,{as:"section",children:e.jsx(f,{className:"text-end",children:e.jsxs(S,{onChange:i=>s(i),type:"radio",name:"options",children:[e.jsxs(p,{title:"Ordenar descendentemente por precio",value:"dsc",id:t,className:"btn-light",children:[e.jsx(v,{})," $"]}),e.jsxs(p,{title:"Ordenar ascendentemente por precio",value:"asc",id:a,className:"btn-light",children:[e.jsx($,{})," $"]}),e.jsxs(p,{title:"Ordenar descendentemente por cantidades vendidas",value:"rel",id:r,className:"btn-light",children:[e.jsx(v,{}),"Rel"]})]})})})}function C(){let{setFilters:s}=n.useContext(h),[t,a]=n.useState(""),[r,i]=n.useState(""),[l,c]=n.useState("");function d(){a(""),i(""),s({busqueda:"",min:0,max:1/0})}function j(o){o.preventDefault(),s({min:t||0,max:r||1/0,busqueda:l})}return e.jsxs(x,{noValidate:!0,onSubmit:j,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h3",{className:"mb-0",children:"Filtrar:"}),e.jsx("div",{className:"text-end",children:e.jsxs(L,{children:[e.jsx(g,{name:"filtrar",variant:"light",type:"submit",title:"Filtrar",children:e.jsx(O,{})}),e.jsx(g,{name:"limpiar-filtros",variant:"light",type:"button",title:"Limpiar filtros",onClick:d,children:e.jsx(P,{})})]})})]}),e.jsx("hr",{}),e.jsxs(u,{className:"mb-3",children:[e.jsx(u.Text,{children:e.jsx(E,{})}),e.jsx(x.Control,{type:"search",value:l,onChange:o=>c(o.target.value)})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(u.Text,{children:"Mín."}),e.jsx(x.Control,{type:"number",className:"text-muted",name:"min",min:"0",max:r?r-100:void 0,value:t,onChange:o=>a(o.target.value),step:"100"})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(u.Text,{children:"Máx."}),e.jsx(x.Control,{type:"number",className:"text-muted",name:"max",min:parseInt(t)+100||1,value:r,onChange:o=>i(o.target.value),step:"100"})]})]})}function G({name:s,description:t,cost:a,currency:r,soldCount:i=0,image:l,to:c="",imgAlt:d=`Imagen ilustrativa de «${s}»`}){return e.jsx(I,{to:c,children:e.jsxs(m,{children:[e.jsx(m.Img,{loading:"lazy",variant:"top",src:`/${l}`,alt:d}),e.jsxs(m.Body,{children:[e.jsx(m.Title,{as:"h5",children:s}),e.jsxs(m.Title,{as:"h5",children:[r," ",a]}),e.jsxs(m.Text,{children:[e.jsx("small",{className:"text-muted",children:t}),e.jsx("br",{}),e.jsxs("small",{children:[i," unidad",i!==1&&"es"," vendida",i!==1?"s":""]})]})]})]})})}function k(){const{productosArray:s,isLoading:t,order:a,filters:r,opciones:i}=n.useContext(h);return t?e.jsx(F,{}):s.length===0?e.jsxs("section",{className:"d-flex flex-column align-items-center text-center pt-4",children:[e.jsx("h2",{children:"No hay productos"}),e.jsx("p",{children:"Actualmente para esta categoría no se encuentran productos en venta"})]}):e.jsx("section",{className:"gy-3 grid-cards-container ",children:s.sort(i[a]).filter(({cost:l,name:c,description:d})=>{const j=(c+" "+d).toLowerCase(),{busqueda:o,min:N,max:y}=r;return l>=N&&l<=y&&j.includes(o.toLowerCase())}).map(({id:l,name:c,...d})=>e.jsx("article",{children:e.jsx(G,{to:`/producto/${l}`,name:c,...d})},`${c}_${l}`))})}const z=n.lazy(()=>T(()=>import("./Error-d44d9e26.js"),["assets/Error-d44d9e26.js","assets/index-c52a1109.js","assets/index-1793a3e6.css","assets/useWindowTitle-276ea800.js","assets/Error-57662c42.css"]));function ee(){const{productos:s,error:t}=n.useContext(h),a=B.useMediaQuery({minWidth:V});return R({windowTitle:(s==null?void 0:s.catName)||"404"}),n.useEffect(()=>{console.log(t==null?void 0:t.message)},[t]),(t==null?void 0:t.message)==="404"?e.jsx(z,{children:e.jsx("h2",{children:"Categoría no encontrada"})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{categoria:s==null?void 0:s.catName}),e.jsxs(_,{fluid:a,children:[e.jsx(D,{}),!a&&e.jsx(w,{children:e.jsx(C,{})}),e.jsxs(b,{children:[a&&e.jsx(f,{as:"aside",xs:"2",children:e.jsx(C,{})}),e.jsx(f,{as:"main",children:e.jsx(k,{})})]})]})]})}export{ee as default};
