import{r as i,e as C,N as w,O as D,p as $,j as e,f as v,h as U,Q as V,_,a as m,R as f,S as I,B as N,C as q,U as R}from"./index-c52a1109.js";import{F as o}from"./Form-ee3cd23b.js";import{R as x}from"./Row-886e41f2.js";import{M as E}from"./Modal-cf264b0d.js";import{I as c}from"./Input-86f7d3ee.js";import{S as F}from"./Spinner-fa1d4b94.js";const y=i.forwardRef(({bsPrefix:s,active:n,disabled:t,eventKey:a,className:l,variant:d,action:u,as:h,...r},j)=>{s=C(s,"list-group-item");const[p,S]=w({key:D(a,r.href),active:n,...r}),P=$(g=>{if(t){g.preventDefault(),g.stopPropagation();return}p.onClick(g)});t&&r.tabIndex===void 0&&(r.tabIndex=-1,r["aria-disabled"]=!0);const L=h||(u?r.href?"a":"button":"div");return e.jsx(L,{ref:j,...r,...p,onClick:P,className:v(l,s,S.isActive&&"active",t&&"disabled",d&&`${s}-${d}`,u&&`${s}-action`)})});y.displayName="ListGroupItem";const G=y,k=i.forwardRef((s,n)=>{const{className:t,bsPrefix:a,variant:l,horizontal:d,numbered:u,as:h="div",...r}=U(s,{activeKey:"onSelect"}),j=C(a,"list-group");let p;return d&&(p=d===!0?"horizontal":`horizontal-${d}`),e.jsx(V,{ref:n,...r,as:h,className:v(t,j,l&&`${j}-${l}`,p&&`${j}-${p}`,u&&`${j}-numbered`)})});k.displayName="ListGroup";const b=Object.assign(k,{Item:G});function z(){return e.jsxs("section",{className:"text-center p-3",children:[e.jsx("h1",{children:"Vender"}),e.jsx("p",{children:"Ingresa los datos del artículo a vender."})]})}const B=i.lazy(()=>_(()=>import("./ModalCondiciones-847f5536.js"),["assets/ModalCondiciones-847f5536.js","assets/index-c52a1109.js","assets/index-1793a3e6.css","assets/Modal-cf264b0d.js"]));function M(){return e.jsx(x,{as:"article",children:e.jsxs(c,{as:m,md:"6",name:"productName",children:[e.jsx(o.Label,{children:"Nombre"}),e.jsx(c.Control,{required:!0,type:"text",maxLength:"20"}),e.jsx(o.Control.Feedback,{type:"invalid",children:"Ingrese un nombre para el producto"})]})})}function T(){return e.jsx(x,{as:"article",children:e.jsxs(c,{as:m,md:"8",name:"imagesProduct",children:[e.jsx(o.Label,{children:"Imágenes"}),e.jsx(c.Control,{accept:"image/*",type:"file",required:!0,multiple:!0}),e.jsx(o.Control.Feedback,{type:"invalid",children:"Debe ingresar al menos una imagen"})]})})}function H(){const s=n=>{n.target.style.height="auto",n.target.style.height=n.target.scrollHeight+"px"};return e.jsx(x,{as:"article",children:e.jsxs(c,{name:"descripcion",as:m,md:"7",children:[e.jsx(o.Label,{children:"Descripción"}),e.jsx(c.Control,{as:"textarea",required:!0,rows:"3",style:{resize:"none",overflow:"hidden"},onChange:s}),e.jsx(o.Control.Feedback,{type:"invalid",children:"Ingrese una descripción para el producto"})]})})}function O(){const{costoInput:s}=i.useContext(f);return e.jsxs(c,{as:m,md:"2",name:"costo",children:[e.jsx(o.Label,{children:"Costo"}),e.jsx(c.Control,{className:"number",type:"number",min:"1",step:"100",required:!0,...s})]})}function A(){const{monedaInput:s}=i.useContext(f);return e.jsxs(c,{as:m,md:"2",name:"moneda",children:[e.jsx(o.Label,{children:"Moneda"}),e.jsxs(o.Select,{required:!0,name:"moneda",...s,children:[e.jsx("option",{value:"UYU",children:"UYU"}),e.jsx("option",{value:"USD",children:"USD"})]})]})}function K(){const{categoriasAPI:s}=i.useContext(f),[n,t]=s;return e.jsx(x,{as:"article",children:e.jsxs(c,{name:"categoria",as:m,md:"4",children:[e.jsx(o.Label,{children:"Categoría"}),e.jsxs(o.Select,{required:!0,name:"categoria",children:[t&&e.jsx(I,{}),n.map(({id:a,name:l})=>e.jsx("option",{value:l,children:l},a))]})]})})}function Y(){return e.jsx(x,{as:"article",children:e.jsxs(c,{name:"cantidad",as:m,md:"3",children:[e.jsx(o.Label,{children:"Cantidad en Stock"}),e.jsx(c.Control,{type:"number",min:"1",defaultValue:"1"})]})})}function Q(){const{tipoDePublicacionInput:s}=i.useContext(f),{publicacionChecked:n,setPublicacionChecked:t}=s;return e.jsxs("article",{children:[e.jsx(o.Check,{type:"radio",name:"tipoDePublicacion",id:i.useId(),value:13,label:"Gold (13%)",checked:n==13,onChange:a=>t(parseInt(a.target.value)),required:!0}),e.jsx(o.Check,{type:"radio",name:"tipoDePublicacion",id:i.useId(),value:7,label:"Premium (7%)",checked:n==7,onChange:a=>t(parseInt(a.target.value)),required:!0}),e.jsx(o.Check,{type:"radio",name:"tipoDePublicacion",id:i.useId(),value:3,label:"Estándar (3%)",checked:n==3,onChange:a=>t(parseInt(a.target.value)),required:!0})]})}function J(){const[s,n]=i.useState(!1),t=()=>n(!1),a=()=>n(!0);return e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"link",onClick:a,children:"Ver condiciones"}),e.jsx(E,{show:s,onHide:t,children:e.jsx("div",{style:{minHeight:"60vh"},children:e.jsx(i.Suspense,{fallback:e.jsx(I,{}),children:e.jsx(B,{handleClose:t})})})})]})}function W(){const{costoInput:s,monedaInput:n,tipoDePublicacionInput:t,formateadores:a}=i.useContext(f),{formatearComoMoneda:l,formatearComoPorcentaje:d}=a;return e.jsxs(b,{children:[e.jsxs(b.Item,{as:"article",className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-0",children:"Precio"}),e.jsx("small",{className:"text-muted",children:"unitario del producto"})]}),e.jsx("div",{className:"align-self-center number",children:l(s.value,n.value)})]}),e.jsxs(b.Item,{as:"article",className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-0",children:"Porcentaje"}),e.jsx("small",{className:"text-muted",children:"Según el tipo de publicación"})]}),e.jsx("div",{className:"align-self-center number",children:d(t.publicacionChecked/100)})]}),e.jsxs(b.Item,{as:"article",className:"d-flex justify-content-between",children:[e.jsx("div",{children:e.jsx("h3",{className:"mb-0",children:"Total ($)"})}),e.jsx("div",{className:"align-self-center number",children:e.jsx("strong",{children:l(parseInt(s.value)+s.value*t.publicacionChecked/100,n.value)})})]})]})}function ae(){const[s,n]=i.useState(!1),[t,a]=i.useState(!1),{resetForm:l}=i.useContext(f),d=u=>{u.preventDefault(),u.stopPropagation();const h=u.currentTarget;if(h.checkValidity()===!1){n(!0);return}a(!0),fetch(R).then(r=>{if(r.ok)return r.json();throw Error(r.status)}).then(r=>{window.alert(r.msg),l(h)}).catch(r=>{console.log(r),window.alert(`No se pudo publicar su producto.
Inténtelo de nuevo más tarde`)}).finally(()=>{a(!1),n(!1)})};return e.jsxs(q,{as:"main",children:[t&&e.jsx(F,{}),e.jsx(z,{}),e.jsx(x,{as:"section",className:"justify-content-md-center",children:e.jsx(m,{md:"10",className:"order-md-1 gap-2",children:e.jsxs(o,{noValidate:!0,validated:s,onSubmit:d,children:[e.jsx("h2",{children:"Información del producto"}),e.jsxs("section",{className:"d-flex flex-column gap-3",children:[e.jsx(M,{}),e.jsx(T,{}),e.jsx(H,{}),e.jsxs(x,{as:"article",children:[e.jsx(O,{}),e.jsx(A,{})]}),e.jsx(K,{}),e.jsx(Y,{})]}),e.jsx("hr",{}),e.jsx("h2",{children:"Tipo de publicación"}),e.jsxs("section",{className:"d-flex flex-column gap-3",children:[e.jsx(Q,{}),e.jsx(J,{})]}),e.jsx("hr",{}),e.jsx("h2",{children:"Costos"}),e.jsx("section",{className:"d-flex flex-column gap-3",children:e.jsx(W,{})}),e.jsx("hr",{}),e.jsx(N,{type:"submit",children:"Vender"})]})})})]})}export{ae as default};
